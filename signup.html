<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TravelTales - Sign Up</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Poppins", sans-serif;
        scroll-behavior: smooth;
      }
      .parallax-header {
        height: 100vh;
        background-image: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)),
          url("https://images.unsplash.com/photo-1506197603052-3cc9c3a201bd");
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
      }
      .signup-card {
        backdrop-filter: blur(10px);
        background: rgba(255, 255, 255, 0.9);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
      .input-field:focus {
        border-color: #f97316;
        box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
      }
      .btn-primary {
        background: linear-gradient(135deg, #f97316, #ea580c);
      }
      .error-message {
        color: #dc2626;
        font-size: 14px;
        margin-top: 4px;
      }
      .success-message {
        color: #059669;
        font-size: 14px;
        margin-top: 4px;
      }
    </style>
  </head>
  <body class="bg-gray-50">
  <!-- Signup Section -->
    <section class="parallax-header relative flex items-center justify-center">
      <div class="absolute inset-0 bg-black/40"></div>
      <div class="relative z-10 w-full max-w-md px-6">
  <!-- Logo -->
        <div class="text-center mb-8">
          <h1 class="text-4xl font-bold text-white mb-2">TravelTales</h1>
          <p class="text-white/80">Discover Incredible India</p>
        </div>

  <!-- Signup Card -->
        <div class="signup-card rounded-2xl p-8 shadow-2xl">
          <div class="text-center mb-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-2">Create Account</h2>
            <p class="text-gray-600">Join us for your travel adventures</p>
          </div>

          <!-- Signup Form -->
          <form id="signupForm" class="space-y-6">
            <div>
              <label for="name" class="block text-sm font-medium text-gray-700 mb-2">
                Full Name
              </label>
              <div class="relative">
                <input
                  type="text"
                  id="name"
                  name="name"
                  required
                  class="input-field w-full px-4 py-3 pl-12 border border-gray-300 rounded-lg focus:outline-none"
                  placeholder="Enter your full name"
                />
                <i class="bi bi-person absolute left-4 top-1/2 text-gray-400" style="transform: translateY(-50%);"></i>
              </div>
              <div id="nameError" class="error-message hidden"></div>
            </div>

            <div>
              <label for="username" class="block text-sm font-medium text-gray-700 mb-2">
                Email Address
              </label>
              <div class="relative">
                <input
                  type="email"
                  id="username"
                  name="username"
                  required
                  class="input-field w-full px-4 py-3 pl-12 border border-gray-300 rounded-lg focus:outline-none"
                  placeholder="Enter your email"
                />
                <i class="bi bi-envelope absolute left-4 top-1/2 text-gray-400" style="transform: translateY(-50%);"></i>
              </div>
              <div id="usernameError" class="error-message hidden"></div>
            </div>

            <div>
              <label for="password" class="block text-sm font-medium text-gray-700 mb-2">
                Password
              </label>
              <div class="relative">
                <input
                  type="password"
                  id="password"
                  name="password"
                  required
                  class="input-field w-full px-4 py-3 pl-12 pr-12 border border-gray-300 rounded-lg focus:outline-none"
                  placeholder="Create a password"
                />
                <i class="bi bi-lock absolute left-4 top-1/2 text-gray-400" style="transform: translateY(-50%);"></i>
                <button
                  type="button"
                  id="togglePassword"
                  class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"
                >
                  <i class="bi bi-eye"></i>
                </button>
              </div>
              <div id="passwordError" class="error-message hidden"></div>
            </div>

            <div>
              <label for="confirmPassword" class="block text-sm font-medium text-gray-700 mb-2">
                Confirm Password
              </label>
              <div class="relative">
                <input
                  type="password"
                  id="confirmPassword"
                  name="confirmPassword"
                  required
                  class="input-field w-full px-4 py-3 pl-12 pr-12 border border-gray-300 rounded-lg focus:outline-none"
                  placeholder="Confirm your password"
                />
                <i class="bi bi-lock-fill absolute left-4 top-1/2 text-gray-400" style="transform: translateY(-50%);"></i>
                <button
                  type="button"
                  id="toggleConfirmPassword"
                  class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"
                >
                  <i class="bi bi-eye"></i>
                </button>
              </div>
              <div id="confirmPasswordError" class="error-message hidden"></div>
            </div>

            <div class="flex items-center">
              <input
                type="checkbox"
                id="terms"
                class="rounded border-gray-300 text-orange-500 focus:ring-orange-500"
                required
              />
              <label for="terms" class="ml-2 text-sm text-gray-600">
                I agree to the <a href="privacy.html" class="text-orange-500 hover:text-orange-600">Terms & Conditions</a>
              </label>
            </div>

            <button
              type="submit"
              class="btn-primary w-full text-white py-3 px-4 rounded-lg font-medium focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2"
            >
              Create Account
            </button>
          </form>

          <!-- Login Link -->
          <div class="text-center mt-6">
            <p class="text-sm text-gray-600">
              Already have an account?
              <a href="login.html" class="text-orange-500 hover:text-orange-600 font-medium">
                Sign in here
              </a>
            </p>
          </div>
        </div>
      </div>
    </section>

  <!-- JavaScript -->
    <script src="users.js"></script>
    <script>
  // Password toggle functions
      const togglePassword = document.getElementById('togglePassword');
      const passwordInput = document.getElementById('password');
      const toggleConfirmPassword = document.getElementById('toggleConfirmPassword');
      const confirmPasswordInput = document.getElementById('confirmPassword');

      togglePassword.addEventListener('click', function() {
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);
        
        const icon = this.querySelector('i');
        if (type === 'password') {
          icon.classList.remove('bi-eye-slash');
          icon.classList.add('bi-eye');
        } else {
          icon.classList.remove('bi-eye');
          icon.classList.add('bi-eye-slash');
        }
      });

      toggleConfirmPassword.addEventListener('click', function() {
        const type = confirmPasswordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        confirmPasswordInput.setAttribute('type', type);
        
        const icon = this.querySelector('i');
        if (type === 'password') {
          icon.classList.remove('bi-eye-slash');
          icon.classList.add('bi-eye');
        } else {
          icon.classList.remove('bi-eye');
          icon.classList.add('bi-eye-slash');
        }
      });

  // Form validation
      const signupForm = document.getElementById('signupForm');
      
      // Real-time validation
      document.getElementById('name').addEventListener('input', validateName);
      document.getElementById('username').addEventListener('input', validateUsername);
      document.getElementById('password').addEventListener('input', validatePassword);
      document.getElementById('confirmPassword').addEventListener('input', validateConfirmPassword);

      function validateName() {
        const name = document.getElementById('name').value;
        const nameError = document.getElementById('nameError');
        
        if (name.length < 2) {
          showError('nameError', 'Name must be at least 2 characters long');
          return false;
        } else if (!/^[A-Za-z\s]+$/.test(name)) {
          showError('nameError', 'Name can only contain letters and spaces');
          return false;
        } else {
          hideError('nameError');
          return true;
        }
      }

      function validateUsername() {
        const username = document.getElementById('username').value;
        const usernameError = document.getElementById('usernameError');
        
        const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
        if (!emailRegex.test(username)) {
          showError('usernameError', 'Please enter a valid email address');
          return false;
        } else if (checkUserExists(username)) {
          showError('usernameError', 'This email is already registered');
          return false;
        } else {
          hideError('usernameError');
          return true;
        }
      }

      function validatePassword() {
        const password = document.getElementById('password').value;
        const passwordError = document.getElementById('passwordError');
        
        if (password.length < 6) {
          showError('passwordError', 'Password must be at least 6 characters long');
          return false;
        } else {
          hideError('passwordError');
          return true;
        }
      }

      function validateConfirmPassword() {
        const password = document.getElementById('password').value;
        const confirmPassword = document.getElementById('confirmPassword').value;
        const confirmPasswordError = document.getElementById('confirmPasswordError');
        
        if (password !== confirmPassword) {
          showError('confirmPasswordError', 'Passwords do not match');
          return false;
        } else {
          hideError('confirmPasswordError');
          return true;
        }
      }

      function showError(elementId, message) {
        const errorElement = document.getElementById(elementId);
        errorElement.textContent = message;
        errorElement.classList.remove('hidden');
      }

      function hideError(elementId) {
        const errorElement = document.getElementById(elementId);
        errorElement.classList.add('hidden');
      }

  // Form submission
      signupForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const name = document.getElementById('name').value;
        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;
        const terms = document.getElementById('terms').checked;
        
        // Validate all fields
        const isNameValid = validateName();
        const isUsernameValid = validateUsername();
        const isPasswordValid = validatePassword();
        const isConfirmPasswordValid = validateConfirmPassword();
        
        if (!terms) {
          showMessage('Please accept the Terms & Conditions', 'error');
          return;
        }
        
        if (!isNameValid || !isUsernameValid || !isPasswordValid || !isConfirmPasswordValid) {
          showMessage('Please fix the errors above', 'error');
          return;
        }
        
        // Add user to the array
        if (addUser(name, username, password)) {
          showMessage('Account created successfully! Redirecting to login...', 'success');
          
          // Redirect to login page after 2 seconds
          setTimeout(() => {
            window.location.href = 'login.html';
          }, 2000);
        } else {
          showMessage('Failed to create account. Please try again.', 'error');
        }
      });

  // Message display function
      function showMessage(message, type) {
        // Remove existing message
        const existingMessage = document.querySelector('.message');
        if (existingMessage) {
          existingMessage.remove();
        }

        // Create new message
        const messageDiv = document.createElement('div');
        messageDiv.className = `message fixed top-4 right-4 px-6 py-3 rounded-lg text-white z-50 transition-all duration-300 ${
          type === 'success' ? 'bg-green-500' : 'bg-red-500'
        }`;
        messageDiv.textContent = message;
        
        document.body.appendChild(messageDiv);
        
        // Remove message after 5 seconds
        setTimeout(() => {
          messageDiv.remove();
        }, 5000);
      }

  // Check if user is already logged in
      if (localStorage.getItem('isLoggedIn') === 'true') {
        window.location.href = 'index.html';
      }
    </script>
  </body>
</html>